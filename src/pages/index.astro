---
import BaseLayout from '../layouts/BaseLayout.astro'
import RichText from '../components/RichText.astro'
import { sanity } from '../lib/sanity'
import { pageBySlugQuery, siteSettingsQuery } from '../lib/sanityQueries'

const settings = sanity ? await sanity.fetch(siteSettingsQuery) : null
const homeSlug = settings?.homeSlug || 'home'
const home = sanity ? await sanity.fetch(pageBySlugQuery, { slug: homeSlug }) : null
---

<BaseLayout title={home?.title || settings?.title || 'Bob'}>
  <h1 class="text-4xl font-bold mb-4">{home?.title}</h1>
  <RichText value={home?.content} />
</BaseLayout>
