---
import BaseLayout from '@/layouts/BaseLayout.astro'
import RichText from '@/components/RichText.astro'
import Button from '@/components/ui/Button.astro'
import Card from '@/components/ui/Card.astro'
import Container from '@/components/layout/Container.astro'
import { sanity } from '../lib/sanity'
import { pageBySlugQuery, siteSettingsQuery } from '../lib/sanityQueries'

const settings = sanity ? await sanity.fetch(siteSettingsQuery) : null
const homeSlug = settings?.homeSlug || 'home'
const home = sanity ? await sanity.fetch(pageBySlugQuery, { slug: homeSlug }) : null
---

<BaseLayout title={home?.title || settings?.title || 'Home'}>
  <Container class="space-y-6">
    <header class="space-y-3">
      <h1 class="text-5xl tracking-tight">{home?.title}</h1>
    </header>
    <Card tone="surface">
      <RichText value={home?.content} />
    </Card>
    <div>
      <Button href="/work" variant="secondary"> View work </Button>
    </div>
  </Container>
</BaseLayout>
